# ANN检索实验报告

## 一、引言

本个项目主要研究的题目是“给定一个向量q和一个海量的向量数据集D，如何快速检索D中与q最相似的top-k向量。”在大规模文本数据分析、推荐系统、搜索引擎等应用中，常常需要在海量的高维向量数据集中，快速检索与给定查询向量q最相似的k个向量（top-k）。后面将介绍几种主流的ANN方法及其在文本向量检索中的应用。

## 二、近似最近邻搜索（ANN）概念

近似最近邻搜索（ANN）旨在高维向量空间中，允许一定误差的前提下，快速找到与查询向量q最相似的k个向量。与精确KNN相比，ANN追求效率，允许检索结果有小概率不是最优解，而精确KNN则需遍历全量数据，计算量大。

## 三、主流ANN方法

### 1. 层次化可导航小世界图（HNSW）

HNSW基于小世界网络理论，构建多层次的图结构索引。顶层为粗粒度导航，底层为精细查找。其构建过程为：节点按概率分配到不同层，每层节点与邻近节点连接，采用启发式策略避免陷入局部最优。查询时，从顶层开始，逐层向下，寻找与q最接近的节点，最终在底层返回k个最近邻。

### 2. 局部敏感哈希（LSH）

LSH通过设计哈希函数，使得相似向量高概率落入同一桶，不相似向量低概率落入同一桶。相关概念已经在周报中提到不再重复，直接看文献里面的结论，LSH的空间复杂度为O(n^(1+γ))，查询时间为O(n^γ)。

### 3. 离散傅里叶变换（DFT）结合R*树

该方法利用DFT将时间序列从时域转换到频域，根据Parseval定理，频域欧氏距离与时域一致。实际信号能量集中在低频，只需保留前几个高频系数即可降维，再用R*树索引降维后的向量。Parseval定理保证了距离不变性。

### 4. 文本相似度方法

文本相似度方法包括字符串方法、语料库方法和知识基方法。字符串方法如编辑距离、N-gram、余弦相似度，适合短文本或字符级比较。论文中并没有实际的解决方案，但是提供了许多文本向量化的技术结合前面提到的HNSW、LSH等向量检索技术，可以实现文本的top-k相似检索。


## 四、不同方法之间的差异

观察论文中的实验结果，发现HNSW在大规模高维数据下表现最佳，兼顾速度与准确率。LSH适合对速度要求极高、可接受一定误差的场景。DFT+R*树适合时间序列等频域稀疏数据，降维后检索效率大幅提升。传统KNN仅适合小规模数据或对准确率要求极高的场景。


## 五、项目实验心得
此次项目实践相比于其他课程，最主要的不是学到什么知识，而是学会了知识检索，文献检索的方法和技巧。在此次项目实际中，提高了阅读英语文献和总结文献的能力，ai是一个很好的扫盲工具，有很多学术的词语可以让ai解释，前期在谷歌学术中找有关于ANN的论文，最主要看引用的数量来判断这篇论文的价值。还有检索的技巧，比如and，or，not和一些通配符可以筛选论文的内容。在了解了前期知识后，就主要看的是每一个方法的性能和在不同情况下的表现，看论文作者做的有关实验，看论文的时候我并没有关注中间过程，只是了解大概的做法之后就看结论，过程很复杂没有必要浪费很多时间。然后后面实践只需要根据使用场景选择适合的算法。



## 参考文献

1. Efficient and robust approximate nearest neighbor search using Hierarchical Navigable Small World graphs
2. A Survey of Text Similarity Approaches
3. Ecient Similarity Search In Sequence Databases
4. Nearest Neighbor Search and Locality Sensitive
Hashing